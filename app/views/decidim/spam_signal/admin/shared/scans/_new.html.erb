<%= link_to(spam_filter_reports_path, class: "flex items-center pb-1") do %>
  <%= icon("arrow-left-s-line") %>
  <span><%= t("decidim.spam_signal.admin.actions.go_back") %></span>
<% end %>

<div class="content spam_signal__section space-y-2">
  <h1 class="card-title">
    <%= t("headings.title", scope: i18n_scope).upcase %> (<% if @form %>2<% else %>1<% end %>/2)
  </h1>
<div>

  <% if @form %>
<div class="grid-x grid-margin-y callout">
  <div class="cell small-10">
    <strong><%= t("name", scope: current_scanner.i18n_key).upcase %></strong><br>
    <em><%= t("description", scope: current_scanner.i18n_key) %></em>
  </div>
</div>
    <%= decidim_form_for(@form, url: routes.send(create_path, config_id: current_config.id), builder: Decidim::SpamSignal::SpamSettingsFormBuilder, method: :post, html: {class: "callout"}) do |f| %>
      <div class="form-fields">
        <em><%= t("#{current_scanner.i18n_key}.description", default: "") %></em>
        <%= f.all_fields %>
        <input type="hidden" name="id" value="<%= current_scanner.handler_name %>">
        <div class="actions">
          <%= f.submit t("decidim.spam_signal.admin.actions.save"), class:"button button__sm button__secondary" %>
        </div>
      </div>
    <% end %>
  <% else %>
    <div class="callout">
      <h2><%= t("headings.choose_scan", scope: i18n_scope) %></h2>
      <div class="flex flex-col space-y-1">
        <% available_scanners.each do |scan| %>
          <%= link_to(routes.send(new_path, config_id: current_config.id, id: scan.handler_name), class: "flex flex-col button button__secondary button__transparent") do %>
            <strong><%= t("#{scan.i18n_key}.name").upcase %></strong><br>
            <em><%= t("#{scan.i18n_key}.description", default: "") %></em>
          <% end %>
        <% end %>
      </div>
    </div>
  <% end %>
</div>
