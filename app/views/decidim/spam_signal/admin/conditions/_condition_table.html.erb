<% conditions.each do |condition| %>
  <tr>
    <td>
      <%= translated_attribute(condition.name) %>
    </td>
    <td>
      <%= I18n.t("#{condition.condition_type}.title", scope: "decidim.spam_signal.admin.condition") %>
    </td>
    <td class="table-list__actions">
      <%= icon_link_to "pencil-line", edit_condition_path(condition), I18n.t("actions.edit", scope: "decidim.admin"), class: "action-icon--edit", method: :get %>

      <button class="action-icon--remove" data-dialog-open=<%= condition.id %>>
        <%= icon "delete-bin-line" %>
      </button>
    </td>
  </tr>

  <%= decidim_modal id: "#{condition.id}", class:"flex flex-col px-4 gap-4" do %>
    <% if flow_condition(condition).empty? %>
      <div><h3 class="h3"> <%= I18n.t("title", scope: "decidim.spam_signal.admin.conditions.actions.delete.modal") %> </h3></div>
    <% else %>
      <div><h3 class="h3"> Condition used in <%= flow_condition(condition).count %> Flow(s) </h3></div>
      <div>
        <% flow_condition(condition).each do |flow| %> 
          <%= link_to "#{flow.flow.name }", edit_flow_path(flow.flow.id), class: "underline text-secondary font-semibold" %>
        <% end %> 
      </div>
      <div>
        <%= I18n.t("content", scope: "decidim.spam_signal.admin.conditions.actions.delete.modal").html_safe %>
      </div>
    <% end %>
      <div class="flex justify-between pt-2">
        <button class="button button__lg button__transparent-secondary" data-dialog-close=<%= condition.id %>>
          <span><%= t("cancel", scope: "decidim.shared.confirm_modal") %></span>
        </button>
        <%= link_to condition, class: "button button__lg button__secondary", method: :delete do %>
          <%= icon "delete-bin-line" %>
          <%= I18n.t("confirm", scope: "decidim.spam_signal.admin.conditions.actions.delete.modal") %>
        <% end %>
      </div>
  <% end %>
<% end %>
